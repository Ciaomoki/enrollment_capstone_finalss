/* =========================================================
   Admin Dashboard — SCOPED, RESPONSIVE  (v2025-09-02b)
   Namespace: .admin-dashboard
   - KPI (yellow) grid: 3×N desktop, 2×N tablet, 2×N phones (2×3)
   - Quick Actions: 4 in one row (desktop), 2×2 (≤1024 & phones)
   - Right rail sticky, scroll-bounded
   - Countdown splits into two rows on small & laptop-ish sizes
   ========================================================= */

/* ===== Reserve space so bottom nav never overlaps this page ===== */
.admin-dashboard main {
  padding-bottom: 96px; /* 80 bottom bar + 16 breathing room */
}

/* ===== Two-column shell (left content | right rail) ===== */
.admin-dashboard .dashboard-content {
  display: grid;
  grid-template-columns: 1fr 360px; /* left | right */
  gap: clamp(16px, 2vw, 24px);
  padding: clamp(16px, 2.2vw, 24px);
  min-height: 0;
}

/* ===== RIGHT RAIL (sticky, scrollable) ===== */
.admin-dashboard .dash-right {
  position: sticky;
  top: 88px; /* below sticky header */
  align-self: start;
  background: #0b4d8f;
  border-radius: 16px;
  padding: 16px 20px 16px 16px; /* extra right so scrollbar never overlaps */
  display: grid;
  gap: 16px;
  align-content: start;
  min-width: 320px;
  max-height: calc(
    100vh - 88px - 80px - 24px
  ); /* view - sticky - bottom nav - pad */
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-gutter: stable both-edges;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* ===== Greeting block & Quick Actions ===== */
.admin-dashboard .greeting-card {
  background: #fff;
  border-radius: 14px;
  border: 1px solid #e5e7eb;
  padding: clamp(14px, 1.6vw, 16px);
}
.admin-dashboard .greet-head h2 {
  color: #0c2d52;
  font-size: clamp(18px, 1.7vw, 20px);
  margin-bottom: 4px;
}
.admin-dashboard .greet-head p {
  color: #6b7280;
  font-size: clamp(12.5px, 1.3vw, 14px);
}

/* Quick Actions: desktop=4 in a row; ≤1024 => 2×2; phones stay 2×2 */
.admin-dashboard .quick-actions {
  margin-top: 14px;
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 12px;
}
.admin-dashboard .qa-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: clamp(12px, 1.6vw, 14px) 10px;
  border-radius: 12px;
  background: #0047ab;
  color: #fff;
  border: none;
  cursor: pointer;
  font-weight: 700;
  text-align: center;
  transition: box-shadow 0.2s ease, filter 0.15s ease;
  min-width: 0;
}
.admin-dashboard .qa-btn i {
  font-size: clamp(16px, 1.6vw, 18px);
  line-height: 1;
}
.admin-dashboard .qa-btn:hover {
  filter: brightness(1.06);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.18);
}
@media (max-width: 1024px) {
  .admin-dashboard .quick-actions {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}
@media (max-width: 600px) {
  .admin-dashboard .quick-actions {
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 10px;
  }
  .admin-dashboard .qa-btn {
    padding: 10px 8px;
    gap: 6px;
  }
}

/* ===== KPI GRID (YELLOW CARDS) — 3 / 2 / 2 ===== */
.admin-dashboard .kpi-grid {
  margin-top: 16px;
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr)); /* desktop */
  gap: 16px;
  align-items: stretch;
  grid-auto-rows: 1fr; /* equal heights */
}
/* tablet */
@media (max-width: 1024px) {
  .admin-dashboard .kpi-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}
/* phones — restore 2 columns so 6 cards become 2×3 */
@media (max-width: 600px) {
  .admin-dashboard .kpi-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

/* iPad Pro-ish widths (992–1120): keep 2 columns & QA 2×2 for breathing room */
@media (min-width: 992px) and (max-width: 1120px) {
  .admin-dashboard .kpi-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
  }
  .admin-dashboard .quick-actions {
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
  }
}

/* ===== KPI card ===== */
.admin-dashboard .kpi-card {
  background: #ffd700;
  border: 3px solid #0047ab;
  border-radius: 18px;
  padding: clamp(14px, 1.8vw, 18px);
  min-height: 140px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: space-between;
  min-width: 0;
  transition: box-shadow 0.2s ease;
}
.admin-dashboard .kpi-card:hover {
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}

.admin-dashboard .kpi-head {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}
.admin-dashboard .kpi-head i {
  font-size: clamp(18px, 2.1vw, 22px);
  color: #0c2d52;
  flex: 0 0 auto;
}
.admin-dashboard .kpi-head h3 {
  font-size: clamp(15px, 1.8vw, 18px);
  color: #0c2d52;
  font-weight: 900;
  min-width: 0;
  white-space: normal;
  overflow-wrap: anywhere;
  line-height: 1.2;
}
.admin-dashboard .kpi-value {
  font-size: clamp(28px, 4.2vw, 36px);
  color: #0c2d52;
  font-weight: 900;
  line-height: 1.05;
}

/* ===== Countdown (Unified with Evaluator Dashboard) ===== */
.admin-dashboard .countdown {
  display: flex;
  align-items: flex-end;
  justify-content: flex-start;
  gap: 8px;
  min-width: 0;
  width: 100%;
  flex-wrap: nowrap;
  font-weight: 800;
  font-variant-numeric: tabular-nums;
  color: #0c2d52;
}
.admin-dashboard .cd-part {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex: 0 1 auto;
  min-width: 0;
  text-align: center;
}
.admin-dashboard .cd-val {
  font-size: 28px; /* evaluator size */
  color: #0c2d52;
  line-height: 1.05;
}
.admin-dashboard .cd-lbl {
  font-size: 11px; /* evaluator size */
  text-transform: uppercase;
  color: #0c2d52;
}
.admin-dashboard .cd-sep {
  flex: 0 0 auto;
  line-height: 1;
  font-weight: 900; /* evaluator weight */
  color: #0c2d52;
}

/* Small screens: split into two rows (Days+Hours | Mins+Secs) */
@media (max-width: 600px) {
  .admin-dashboard .countdown {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px 12px;
    justify-items: center;
    align-items: end;
  }
  .admin-dashboard .cd-sep {
    display: none;
  }
  .admin-dashboard .cd-val {
    font-size: 24px; /* slightly smaller for phones */
  }
  .admin-dashboard .cd-lbl {
    font-size: 10px;
  }
}

/* Popular laptop sizes: also split and slightly downsize to avoid crowding */
@media (width: 1440px) and (height: 900px),
  (width: 1280px) and (height: 720px),
  (width: 1366px) and (height: 768px),
  (width: 1536px) and (height: 864px),
  (width: 1920px) and (height: 1080px) {
  .admin-dashboard .kpi-head h3 {
    font-size: clamp(14.5px, 1.6vw, 17px);
  }
  .admin-dashboard .kpi-value {
    font-size: clamp(26px, 3.8vw, 34px);
  }
  .admin-dashboard .countdown {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px 12px;
    justify-items: center;
    align-items: end;
  }
  .admin-dashboard .cd-sep {
    display: none;
  }
  .admin-dashboard .cd-val {
    font-size: 26px; /* unified tone, slightly reduced for laptop fit */
  }
  .admin-dashboard .cd-lbl {
    font-size: 11px;
  }
}

/* iPad Pro M4 (1032×1376) — nudge ONLY the last two KPI cards (Flagged, Deadline) */
@media (width: 1032px) and (height: 1376px) {
  .admin-dashboard .kpi-grid > .kpi-card:nth-last-child(2) .kpi-head h3,
  .admin-dashboard .kpi-grid > .kpi-card:last-child .kpi-head h3 {
    font-size: 14px;
  }
  .admin-dashboard .kpi-grid > .kpi-card:nth-last-child(2) .kpi-value,
  .admin-dashboard .kpi-grid > .kpi-card:last-child .kpi-value {
    font-size: 24px;
  }
  .admin-dashboard .kpi-grid > .kpi-card:last-child .cd-val {
    font-size: 24px; /* harmonized with evaluator scale for this view */
  }
}

/* ===== Right-rail panels ===== */
.admin-dashboard .panel {
  background: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 14px;
  padding: 14px 16px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  transition: box-shadow 0.2s ease;
}
.admin-dashboard .panel:hover {
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
}
.admin-dashboard .panel .panel-title {
  margin: -14px -16px 12px -16px;
  padding: 12px 16px;
  background: #f2c94c;
  border-top-left-radius: 14px;
  border-top-right-radius: 14px;
  font-weight: 900;
  color: #0b1a33;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  font-size: clamp(14px, 1.6vw, 16px);
}

/* Progress bar */
.admin-dashboard .panel-progress .progress-percent {
  color: #0c2d52;
  font-weight: 900;
}
.admin-dashboard .progressbar {
  width: 100%;
  height: 8px;
  border-radius: 9999px;
  background: #e5e7eb;
  overflow: hidden;
}
.admin-dashboard .progressbar-fill {
  height: 100%;
  background: #ffd700;
}

/* Table-like (flagged) */
.admin-dashboard .table-like {
  width: 100%;
}
.admin-dashboard .table-like.three-cols .tl-head,
.admin-dashboard .table-like.three-cols .tl-row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 8px;
  align-items: center;
}
.admin-dashboard .table-like .tl-head {
  font-size: clamp(12px, 1.4vw, 13px);
  font-weight: 900;
  color: #0c2d52;
  padding: 8px 6px;
  border-bottom: 1px solid #e5e7eb;
}
.admin-dashboard .table-like .tl-row {
  font-size: clamp(12px, 1.6vw, 13px);
  color: #111827;
  padding: 10px 6px;
  border-bottom: 1px solid #f3f4f6;
}

/* Clickable flagged rows */
.admin-dashboard .panel-flagged .tl-row {
  cursor: pointer;
  border-radius: 8px;
}
.admin-dashboard .panel-flagged .tl-row:hover {
  background: #fffdf6;
}
.admin-dashboard .panel-flagged .tl-row:focus {
  outline: 2px solid #ffd700;
  outline-offset: 2px;
}

/* Evaluator Requests */
.admin-dashboard .panel-requests .req-head,
.admin-dashboard .panel-requests .req-row {
  display: grid;
  grid-template-columns: minmax(0, 1fr) 64px 64px;
  align-items: center;
  column-gap: 10px;
}
.admin-dashboard .panel-requests .req-head {
  padding: 8px 0 10px;
  border-bottom: 2px solid #e6e9f0;
  color: #0c2d52;
  font-weight: 900;
  font-size: clamp(12px, 1.4vw, 13px);
}
.admin-dashboard .panel-requests .req-head > :nth-child(2),
.admin-dashboard .panel-requests .req-head > :nth-child(3) {
  justify-self: end;
  text-align: right;
}
.admin-dashboard .panel-requests .req-row {
  padding: 10px 0;
  border-bottom: 1px solid #eef1f6;
}
.admin-dashboard .panel-requests .req-row:last-child {
  border-bottom: 0;
}
.admin-dashboard .panel-requests .req-row:hover {
  background: #fffdf6;
  border-radius: 8px;
}

.admin-dashboard .panel-requests .req-eval {
  display: grid;
  grid-template-columns: 36px minmax(0, 1fr);
  grid-template-rows: auto auto;
  column-gap: 8px;
  align-items: center;
  min-width: 0;
}
.admin-dashboard .panel-requests .req-avatar {
  grid-row: 1 / span 2;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: #e6efff;
  color: #0b4d8f;
  display: grid;
  place-items: center;
  flex-shrink: 0;
}
.admin-dashboard .panel-requests .req-avatar i {
  font-size: 18px;
  line-height: 1;
}
.admin-dashboard .panel-requests .req-text {
  min-width: 0;
  display: grid;
  gap: 2px;
}
.admin-dashboard .panel-requests .req-text strong {
  color: #0b1a33;
  font-size: clamp(12.5px, 1.5vw, 13.5px);
  line-height: 1.25;
  overflow-wrap: anywhere;
}
.admin-dashboard .panel-requests .req-text small {
  color: #6b7280;
  font-size: clamp(11.5px, 1.3vw, 12.5px);
  line-height: 1.2;
  overflow-wrap: anywhere;
}
.admin-dashboard .panel-requests .req-btn {
  justify-self: end;
  width: 48px;
  height: 28px;
  border-radius: 9999px;
  border: 1px solid transparent;
  background: #f3f4f6;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  transition: box-shadow 0.2s ease, transform 0.05s ease, filter 0.2s ease;
}
.admin-dashboard .panel-requests .req-btn i {
  font-size: 14px;
  line-height: 1;
}
.admin-dashboard .panel-requests .req-btn.approve {
  background: #ecfdf5;
  border-color: #86efac;
  box-shadow: inset 0 0 0 1px #86efac;
}
.admin-dashboard .panel-requests .req-btn.approve i {
  color: #16a34a;
}
.admin-dashboard .panel-requests .req-btn.decline {
  background: #fef2f2;
  border-color: #fca5a5;
  box-shadow: inset 0 0 0 1px #fca5a5;
}
.admin-dashboard .panel-requests .req-btn.decline i {
  color: #dc2626;
}
.admin-dashboard .panel-requests .req-btn:hover {
  filter: brightness(1.02);
}
.admin-dashboard .panel-requests .req-btn:active {
  transform: translateY(1px);
}

/* Recent Activity */
.admin-dashboard .activity-list {
  margin: 0;
  padding: 0;
  list-style: none;
  display: grid;
  gap: 10px;
}
.admin-dashboard .activity-row {
  display: grid;
  grid-template-columns: 80px minmax(0, 1fr);
  gap: 12px;
  align-items: start;
  padding: 6px 0;
  border-bottom: 1px dashed #e5e7eb;
}
.admin-dashboard .activity-row:last-child {
  border-bottom: 0;
}
.admin-dashboard .activity-time {
  font-size: clamp(11.5px, 1.2vw, 12px);
  color: #475569;
}
.admin-dashboard .activity-text {
  display: grid;
  gap: 2px;
  min-width: 0;
}
.admin-dashboard .activity-text strong {
  font-size: clamp(12.5px, 1.5vw, 13.5px);
  color: #0b1a33;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.admin-dashboard .activity-text span {
  font-size: clamp(11.5px, 1.3vw, 12.5px);
  color: #6b7280;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ===== Responsive shell tuning ===== */
@media (min-width: 1440px) {
  .admin-dashboard .dashboard-content {
    grid-template-columns: 1fr 380px;
  }
}
@media (min-width: 1280px) and (max-width: 1439px) {
  .admin-dashboard .dashboard-content {
    grid-template-columns: 1fr 360px;
  }
}
@media (max-width: 1024px) {
  .admin-dashboard .dashboard-content {
    grid-template-columns: 1fr 320px;
  }
}
@media (max-width: 992px) {
  .admin-dashboard .dashboard-content {
    grid-template-columns: 1fr;
  }
  .admin-dashboard .dash-right {
    position: static;
    max-height: none;
    overflow: visible;
    background: transparent;
    padding: 0;
    border-radius: 0;
    scrollbar-gutter: auto;
  }
  .admin-dashboard .panel {
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.06);
  }
}

/* Tablet compact request buttons */
@media (min-width: 768px) and (max-width: 1024px) {
  .admin-dashboard .panel-requests .req-head,
  .admin-dashboard .panel-requests .req-row {
    grid-template-columns: minmax(0, 1fr) 56px 56px;
    column-gap: 8px;
  }
  .admin-dashboard .panel-requests .req-btn {
    width: 44px;
    height: 26px;
  }
  .admin-dashboard .panel-requests .req-btn i {
    font-size: 13px;
  }
  .admin-dashboard .panel-requests .req-eval {
    grid-template-columns: 32px minmax(0, 1fr);
  }
  .admin-dashboard .panel-requests .req-avatar {
    width: 32px;
    height: 32px;
  }
  .admin-dashboard .panel-requests .req-avatar i {
    font-size: 16px;
  }
}

/* Extra tightening for very small phones */
@media (max-width: 520px) {
  .admin-dashboard .dashboard-content {
    padding: 12px;
    gap: 12px;
  }
  .admin-dashboard .kpi-card {
    padding: 12px;
  }
  .admin-dashboard .panel {
    padding: 12px;
  }
  .admin-dashboard .panel .panel-title {
    padding: 10px 12px;
  }
}

/* iPad Pro M4 (1032×1376) — keep title compact but match number size */
@media (width: 1032px) and (height: 1376px) {
  /* Flagged Assessments (2nd to last card) */
  .admin-dashboard .kpi-grid > .kpi-card:nth-last-child(2) .kpi-value {
    /* same sizing as other KPI numbers */
    font-size: clamp(28px, 4.2vw, 36px);
  }
}
/* =========================================================
   Admin Dashboard — Desktop-only overrides (≥1121px)
   Load AFTER admindashb.css
   ========================================================= */
@media (min-width: 1121px) {
  /* Quick Actions: keep a single row of 4, equal heights */
  .admin-dashboard .quick-actions {
    grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
    grid-auto-rows: 1fr !important;
  }

  /* KPI grid (yellow): keep 3-up on desktop */
  .admin-dashboard .kpi-grid {
    grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  }

  /* Countdown: single-row with separators on desktop (evaluator style) */
  .admin-dashboard .countdown {
    display: flex !important;
    align-items: flex-end !important;
    justify-content: flex-start !important;
    column-gap: 8px !important;
    row-gap: 0 !important;
    flex-wrap: nowrap !important;
  }
  .admin-dashboard .cd-sep {
    display: inline-block !important;
  }
  .admin-dashboard .cd-val {
    font-size: 28px !important;
    line-height: 1.05 !important;
  }
  .admin-dashboard .kpi-card .kpi-value {
    font-size: clamp(28px, 4.2vw, 36px) !important;
    line-height: 1.05 !important;
  }
}

/* ================= Long-label safety in KPI cards ================= */
.admin-dashboard .kpi-head {
  min-width: 0; /* allow children to shrink inside card */
}
.admin-dashboard .kpi-head h3 {
  /* let long KPI titles wrap instead of overflowing/overlapping */
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
  line-height: 1.2;
}

/* If you show any sublabels inside KPI cards (optional safeguard) */
.admin-dashboard .kpi-card .kpi-subtitle,
.admin-dashboard .panel .panel-title span {
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* ================= Countdown — only single-row OR 2-row (harmonized) ================= */

/* Desktop: single row with separators (evaluator style) */
.admin-dashboard .countdown {
  display: flex;
  align-items: flex-end;
  justify-content: flex-start;
  gap: 8px;
  min-width: 0;
  width: 100%;
  flex-wrap: nowrap;
  font-weight: 800;
  font-variant-numeric: tabular-nums;
}
.admin-dashboard .cd-part {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex: 0 1 auto;
  min-width: 0;
  text-align: center;
}
.admin-dashboard .cd-sep {
  flex: 0 0 auto;
  line-height: 1;
}
.admin-dashboard .cd-val {
  font-size: 28px;
  color: #0c2d52;
  line-height: 1.05;
}
.admin-dashboard .cd-lbl {
  font-size: 11px;
  text-transform: uppercase;
  color: #0c2d52;
}

/* Tablet/Phone: exactly 2 rows => (Days Hours) / (Mins Secs); hide ":" */
@media (max-width: 1024px) {
  .admin-dashboard .countdown {
    display: grid; /* switch to 2×2 grid */
    grid-template-columns: repeat(2, 1fr);
    grid-auto-rows: auto;
    column-gap: 8px;
    row-gap: 6px;
    justify-items: center;
    align-items: end;
  }
  .admin-dashboard .cd-sep {
    display: none !important; /* remove separators */
  }
  .admin-dashboard .cd-val {
    font-size: 24px; /* safe on narrower cards */
  }
  .admin-dashboard .cd-lbl {
    font-size: 10px;
  }
}

/* Very small phones: extra tightening */
@media (max-width: 420px) {
  .admin-dashboard .cd-val {
    font-size: 22px;
  }
  .admin-dashboard .cd-lbl {
    font-size: 10px;
  }
}

/* ===== iPad Pro / ~1032px (Tablet Large iPad Pro M4) ===== */
@media (min-width: 992px) and (max-width: 1120px) {
  /* Countdown: enforce EXACT 2-row layout (Days+Hours / Mins+Secs) */
  .admin-dashboard .countdown {
    display: grid !important;
    grid-template-columns: repeat(2, 1fr);
    grid-auto-rows: auto;
    column-gap: 10px;
    row-gap: 6px;
    justify-items: center;
    align-items: end;
    width: 100%;
    min-width: 0;
    font-variant-numeric: tabular-nums;
  }
  .admin-dashboard .cd-sep {
    display: none !important;
  }
  .admin-dashboard .cd-val {
    font-size: 24px;
  }
  .admin-dashboard .cd-lbl {
    font-size: 10.5px;
  }

  /* Long KPI titles: allow wrap and gently reduce size */
  .admin-dashboard .kpi-head h3 {
    font-size: clamp(14px, 1.5vw, 16px);
    white-space: normal;
    overflow-wrap: anywhere;
    line-height: 1.15;
  }
  /* Ensure big numbers don’t crowd */
  .admin-dashboard .kpi-value {
    font-size: clamp(26px, 3.6vw, 32px);
    line-height: 1.05;
  }
}

/* =======================================================================
   Flagged Assessment Preview — SCOPED styles (table-only scrolling)
   ======================================================================= */
.flagged-preview-modal {
  --fp-blue: #0c2d52;
  --fp-gold: #ffd700;
  --fp-line: #e5e7eb;
  --fp-radius: 16px;
  --fp-table-min-w: 980px; /* base table width for desktop */
  --fp-row-h: 44px;

  position: fixed;
  inset: 0;
  z-index: 1000;
  display: none; /* toggled via [aria-hidden] */
  place-items: center;
}
.flagged-preview-modal[aria-hidden="false"] {
  display: grid;
}

.flagged-preview-modal .fp-overlay {
  position: absolute;
  inset: 0;
  background: rgba(12, 45, 82, 0.55);
  backdrop-filter: blur(2px);
}

/* Dialog never side-scrolls; only table wrapper may scroll */
.flagged-preview-modal .fp-dialog {
  position: relative;
  width: min(980px, 94vw);
  max-height: 88vh;
  background: #fff;
  border-radius: var(--fp-radius);
  box-shadow: 0 20px 60px rgba(12, 45, 82, 0.35);
  display: flex;
  flex-direction: column;
  overflow: hidden; /* <— critical */
}

/* Header */
.flagged-preview-modal .fp-header {
  display: grid;
  grid-template-columns: 1fr auto 40px;
  align-items: center;
  gap: 14px;
  padding: 14px 16px;
  background: #f2c94c;
}
.flagged-preview-modal .fp-id {
  display: grid;
  grid-template-columns: 48px 1fr;
  gap: 10px;
  align-items: center;
}
.flagged-preview-modal .fp-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  display: grid;
  place-items: center;
  background: #fff;
  color: var(--fp-blue);
  border: 2px solid #e6eef6;
  font-size: 22px;
}
.flagged-preview-modal .fp-who h3 {
  margin: 0;
  font-size: 18px;
  color: #0b1a33;
  font-weight: 900;
}
.flagged-preview-modal .fp-meta {
  font-size: 12px;
  color: #1f2a44;
  opacity: 0.9;
  margin-top: 2px;
}

.flagged-preview-modal .fp-assignee {
  text-align: right;
}
.flagged-preview-modal .fp-assignee-label {
  font-size: 12px;
  color: #1f2a44;
  opacity: 0.9;
  display: block;
}
.flagged-preview-modal .fp-assignee-row {
  display: flex;
  align-items: center;
  gap: 10px;
}
.flagged-preview-modal .fp-assignee-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: grid;
  place-items: center;
  background: #fff;
  color: var(--fp-blue);
  border: 2px solid #e6eef6;
  font-size: 18px;
}
.flagged-preview-modal .fp-assignee-name {
  font-weight: 800;
  color: #0b1a33;
  font-size: 14px;
}
.flagged-preview-modal .fp-assignee-email {
  font-size: 12px;
  color: #334155;
}
.flagged-preview-modal .fp-close {
  border: none;
  background: #fff;
  width: 36px;
  height: 36px;
  border-radius: 999px;
  display: grid;
  place-items: center;
  cursor: pointer;
  color: var(--fp-blue);
}

/* Body layout: grid, but never side-scrolls */
.flagged-preview-modal .fp-body {
  display: grid;
  grid-template-columns: 3fr 1.2fr;
  gap: 16px;
  padding: 16px;
  min-height: 0;
  overflow: hidden; /* <— critical */
}
.flagged-preview-modal .fp-table-card,
.flagged-preview-modal .fp-rail {
  min-width: 0;
} /* allow shrink without forcing page X-scroll */

/* Table card */
.flagged-preview-modal .fp-table-card {
  background: #fff;
  border: 1px solid var(--fp-line);
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  min-height: 0;
  overflow: hidden; /* child wrapper owns scroll */
}
.flagged-preview-modal .fp-table-head {
  padding: 10px 14px;
  border-bottom: 1px solid var(--fp-line);
  font-weight: 800;
  color: var(--fp-blue);
  font-size: 14px;
}

/* The ONLY scroller (both X and Y when needed) */
.flagged-preview-modal .fp-table-wrap {
  flex: 1 1 auto;
  min-height: 0;
  max-height: 60vh;
  overflow-y: auto;
  overflow-x: auto; /* <— ONLY this element scrolls horizontally */
  -webkit-overflow-scrolling: touch;
  border-radius: 0 0 12px 12px;
  scrollbar-gutter: stable both-edges;
  overscroll-behavior: contain;
  touch-action: pan-x pan-y;
}

/* Table */
.flagged-preview-modal .fp-table {
  width: 100%;
  min-width: var(--fp-table-min-w);
  border-collapse: separate;
  border-spacing: 0;
  table-layout: auto;
  font-size: 14px;
  word-break: break-word;
  overflow-wrap: anywhere;
}
.flagged-preview-modal .fp-table thead th {
  position: sticky;
  top: 0;
  z-index: 1;
  background: var(--fp-blue);
  color: var(--fp-gold);
  padding: 10px 12px;
  text-align: left;
  font-weight: 800;
  white-space: nowrap; /* default (desktop) */
  line-height: 1.2;
}
.flagged-preview-modal .fp-table th.th-2line {
  /* allow two-line headers when cramped */
  white-space: normal;
}
.flagged-preview-modal .fp-table td {
  padding: 10px 12px;
  border-bottom: 1px solid #eee;
  vertical-align: middle;
  height: var(--fp-row-h);
}
.flagged-preview-modal .fp-table tbody tr:nth-child(even) {
  background: #f8f9fa;
}

/* Right rail */
.flagged-preview-modal .fp-rail {
  display: grid;
  gap: 12px;
}
.flagged-preview-modal .fp-remarks-title,
.flagged-preview-modal .fp-message-title {
  font-weight: 800;
  color: var(--fp-blue);
  margin-bottom: 6px;
}
.flagged-preview-modal .fp-remarks p {
  margin: 0;
  color: #111827;
  font-size: 14px;
}
.flagged-preview-modal .fp-message textarea {
  width: 100%;
  min-height: 120px;
  border-radius: 10px;
  border: 1px solid #e5e7eb;
  padding: 10px 12px;
  font: inherit;
}
.flagged-preview-modal .fp-send-row {
  display: flex;
  justify-content: flex-end;
}
.flagged-preview-modal .fp-send {
  background: var(--fp-gold);
  color: var(--fp-blue);
  border: none;
  border-radius: 999px;
  padding: 10px 14px;
  font-weight: 800;
  cursor: pointer;
}

/* Resize handle (vertical) */
.flagged-preview-modal .fp-resize-handle {
  position: relative;
  height: 14px;
  margin-top: 6px;
  cursor: ns-resize;
  touch-action: none;
  user-select: none;
  border-radius: 8px;
  background: radial-gradient(
        circle at 50% 6px,
        rgba(0, 0, 0, 0.18) 0 2px,
        transparent 2px
      )
      8px 0/16px 8px repeat-x,
    radial-gradient(
        circle at 50% 10px,
        rgba(0, 0, 0, 0.12) 0 1px,
        transparent 1px
      )
      16px 0/16px 8px repeat-x;
}

/* Scroll hint (modal-local) */
.flagged-preview-modal .fp-scroll-hint-overlay {
  position: absolute;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  pointer-events: none;
}
.flagged-preview-modal .fp-scroll-hint-overlay[data-open="1"] {
  display: flex;
}
.flagged-preview-modal .fp-scroll-hint {
  background: rgba(12, 45, 82, 0.92);
  color: #fff;
  padding: 12px 16px;
  border-radius: 10px;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
  font-size: 14px;
  text-align: center;
  max-width: 86vw;
}
.flagged-preview-modal .fp-scroll-hint b {
  color: var(--fp-gold);
}

/* ------------------- Responsiveness ------------------- */

/* iPad Pro M4 portrait (1032 × 1376) and below: allow 2-line headers, smaller text */
@media (max-width: 1032px) {
  .flagged-preview-modal .fp-table thead th {
    font-size: 13px;
  }
  .flagged-preview-modal .fp-table th.th-2line {
    white-space: normal;
  }
}

/* Tablet / Phone: stack rail below, keep table-only X scroll */
@media (max-width: 1024px) {
  .flagged-preview-modal .fp-body {
    grid-template-columns: 1fr;
  }
  .flagged-preview-modal .fp-rail {
    order: 2;
  }
  .flagged-preview-modal .fp-table-card {
    order: 1;
  }
  .flagged-preview-modal .fp-dialog {
    width: min(920px, 96vw);
  }
  .flagged-preview-modal .fp-table {
    min-width: 820px;
  } /* creates X-scroll in wrapper only */
}

/* Phones: tighter font sizes */
@media (max-width: 480px) {
  .flagged-preview-modal .fp-table thead th {
    font-size: 12.5px;
  }
  .flagged-preview-modal .fp-table td {
    font-size: 13px;
  }
}

/* =========================================================
   Countdown 2-row override for specific desktop sizes
   Applies only at: 1536×864, 1440×900, 1366×768, 1280×720
   ========================================================= */
@media (width: 1536px) and (height: 864px),
  (width: 1440px) and (height: 900px),
  (width: 1366px) and (height: 768px),
  (width: 1280px) and (height: 720px) {
  /* Switch to strict 2x2 grid; only these sizes are affected */
  .admin-dashboard .countdown {
    display: grid !important;
    grid-template-columns: repeat(2, 1fr);
    grid-auto-rows: auto;
    column-gap: 10px;
    row-gap: 6px;
    justify-items: center;
    align-items: end;
    width: 100%;
    min-width: 0;
    font-weight: 800;
    font-variant-numeric: tabular-nums;
  }

  /* Hide ":" separators in 2-row layout */
  .admin-dashboard .cd-sep {
    display: none !important;
  }

  /* Tightened typography for these laptop views */
  .admin-dashboard .cd-val {
    font-size: 24px !important;
    line-height: 1.05 !important;
  }
  .admin-dashboard .cd-lbl {
    font-size: 10.5px !important;
    text-transform: uppercase;
  }
}

/* =========================================================
   Flagged Preview Modal — overlay, stacking, blur, and mobile fit
   (Non-destructive overrides)
   ========================================================= */

/* Put modal above the sticky header and everything else */
.flagged-preview-modal {
  z-index: 3000 !important;
}

/* Stronger backdrop blur that covers the whole app */
.flagged-preview-modal .fp-overlay {
  background: rgba(12, 45, 82, 0.35) !important;
  backdrop-filter: blur(6px) saturate(0.9) !important;
  -webkit-backdrop-filter: blur(6px) saturate(0.9) !important;
}

/* Lock the page and blur underlying UI while modal is open */
body.modal-open {
  overflow: hidden !important;
  height: 100%;
}
body.modal-open .top-bar,
body.modal-open header,
body.modal-open .global-container,
body.modal-open #bottomNav,
body.modal-open .sidebar {
  filter: blur(3px) saturate(0.96);
  transition: filter 0.15s ease;
  will-change: filter;
}

/* Ensure the dialog is fully visible on all screens */
.flagged-preview-modal .fp-dialog {
  margin: 10px !important;
  width: min(980px, 96vw) !important;
  /* Use small-viewport units to avoid mobile address-bar issues */
  max-height: calc(
    100svh - 20px - env(safe-area-inset-top) - env(safe-area-inset-bottom)
  ) !important;
  display: flex !important;
  flex-direction: column !important;
  overflow: hidden !important;
  border-radius: 16px !important;
}

/* Body never scrolls; internal areas do */
.flagged-preview-modal .fp-body {
  min-height: 0 !important;
  overflow: hidden !important;
}

/* Only the TABLE area scrolls (both axes if needed).
   Right panel/rail stays fixed within the modal. */
.flagged-preview-modal .fp-table-wrap {
  overflow: auto !important;
  -webkit-overflow-scrolling: touch;
  max-height: 60vh; /* desktop baseline; mobile tweaks below */
}

/* Mobile / tablet: stack rail below and keep everything visible */
@media (max-width: 1024px) {
  .flagged-preview-modal .fp-dialog {
    width: min(920px, 96vw) !important;
    max-height: calc(
      100svh - 16px - env(safe-area-inset-top) - env(safe-area-inset-bottom)
    ) !important;
    margin: 8px !important;
  }
  .flagged-preview-modal .fp-body {
    display: grid !important;
    grid-template-columns: 1fr !important; /* table on top, rail below */
    gap: 12px !important;
  }
  .flagged-preview-modal .fp-table-wrap {
    max-height: 48vh !important; /* leave space for the rail */
  }
}

/* Very small phones: a touch more room for the rail */
@media (max-width: 420px) {
  .flagged-preview-modal .fp-table-wrap {
    max-height: 42vh !important;
  }
}
/* =========================================================
   1920×1080 Laptop Fixes — Non-destructive overrides
   Paste at the very bottom of admindashb.css
   ========================================================= */
@media (width: 1920px) and (height: 1080px) {
  /* --- Countdown: single row with ":" separators, unified with evaluator --- */
  .admin-dashboard .countdown {
    display: flex !important;
    flex-wrap: nowrap !important;
    align-items: flex-end !important;
    justify-content: flex-start !important;
    gap: 8px !important;
    min-width: 0 !important;
  }
  .admin-dashboard .cd-sep {
    display: inline-block !important;
  }
  .admin-dashboard .cd-val {
    font-size: 28px !important;
    line-height: 1.05 !important;
  }
  .admin-dashboard .cd-lbl {
    font-size: 11px !important;
    text-transform: uppercase;
  }
  /* Long titles keep wrapping nicely */
  .admin-dashboard .kpi-head h3 {
    white-space: normal !important;
    overflow-wrap: anywhere !important;
    word-break: break-word !important;
  }

  /* --- Bottom nav fits alongside sidebar (desktop) --- */
  :root {
    --sidebar-w-1080: 280px;
  } /* fallback if no variable exists */

  #bottomNav {
    left: var(--sidebar-w-1080) !important;
    width: calc(100% - var(--sidebar-w-1080)) !important;
    bottom: 0 !important;
    z-index: 1500 !important; /* sit above page content but below modal */
  }
  #bottomNav.collapsed {
    left: 0 !important;
    width: 100% !important;
  }

  /* --- Right rail: respect the 96px bottom bar so it never overlaps --- */
  .admin-dashboard .dash-right {
    /* view - sticky header 88 - bottom nav 96 - page padding 24 */
    max-height: calc(100vh - 88px - 96px - 24px) !important;
  }
}
